{
    "nodes": [
        {
            "parameters": {
                "formTitle": "Generate X Template",
                "formDescription": "æ°—ã«ãªã£ãŸæŠ•ç¨¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\n",
                "formFields": {
                    "values": [
                        {
                            "fieldLabel": "XæŠ•ç¨¿ or ã‚¢ã‚¤ãƒ‡ã‚¢",
                            "fieldType": "textarea",
                            "placeholder": "æŠ•ç¨¿ / æŠ•ç¨¿è€…"
                        },
                        {
                            "fieldLabel": "URL",
                            "placeholder": "URLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
                        }
                    ]
                },
                "options": {}
            },
            "type": "n8n-nodes-base.formTrigger",
            "typeVersion": 2.5,
            "position": [
                0,
                -128
            ],
            "id": "c2ee38f0-4961-4d5f-9d37-c4408eefab8c",
            "name": "On form submission",
            "webhookId": "20664c36-192d-4c34-8aa3-14f8e675ac7e"
        },
        {
            "parameters": {
                "assignments": {
                    "assignments": [
                        {
                            "id": "d5586996-1f80-414a-9ea8-9ddd5e6639bb",
                            "name": "raw_text",
                            "value": "={{ $json['XæŠ•ç¨¿ or ã‚¢ã‚¤ãƒ‡ã‚¢'] }}",
                            "type": "string"
                        },
                        {
                            "id": "49111a45-ecf1-42e3-8b95-ddbfb35a2aff",
                            "name": "url",
                            "value": "={{ $json.URL }}",
                            "type": "string"
                        }
                    ]
                },
                "options": {}
            },
            "type": "n8n-nodes-base.set",
            "typeVersion": 3.4,
            "position": [
                208,
                -128
            ],
            "id": "d7330f72-c495-4a48-8847-df81b816c039",
            "name": "Normalize Input"
        },
        {
            "parameters": {
                "modelName": "models/gemini-3-flash-preview",
                "options": {}
            },
            "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
            "typeVersion": 1,
            "position": [
                448,
                -96
            ],
            "id": "cd238fed-afd4-47bb-89bd-9b77e0554541",
            "name": "Google Gemini Chat Model",
            "credentials": {
                "googlePalmApi": {
                    "id": "rCOopoQB7i0IPbRI",
                    "name": "Free: Google Gemini(PaLM) Api account"
                }
            }
        },
        {
            "parameters": {
                "schemaType": "manual",
                "inputSchema": "{\n  \"template_type\": \"string\",\n  \"template\": {\n    \"hook\": { \"instruction\": \"string\" },\n    \"core\": { \"instruction\": \"string\" },\n    \"body\": [\n      { \"instruction\": \"string\" }\n    ],\n    \"proof\": { \"instruction\": \"string\" },\n    \"cta\": { \"instruction\": \"string\" }\n  },\n  \"placeholders\": [\n    { \"key\": \"string\", \"hint\": \"string\" }\n  ],\n  \"sanitized_terms\": [\n    { \"from\": \"string\", \"to\": \"string\" }\n  ]\n}"
            },
            "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
            "typeVersion": 1.3,
            "position": [
                592,
                -96
            ],
            "id": "1d0efe1b-3cfb-4c2b-854b-df7bdba49712",
            "name": "Structured Output Parser"
        },
        {
            "parameters": {
                "modelName": "models/gemini-2.5-flash-lite",
                "options": {}
            },
            "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
            "typeVersion": 1,
            "position": [
                448,
                208
            ],
            "id": "e4822d88-fce4-4183-95d7-18540adb5a46",
            "name": "Google Gemini Chat Model1",
            "credentials": {
                "googlePalmApi": {
                    "id": "rCOopoQB7i0IPbRI",
                    "name": "Free: Google Gemini(PaLM) Api account"
                }
            }
        },
        {
            "parameters": {
                "text": "={{ $json.raw_text }}",
                "schemaType": "manual",
                "inputSchema": "={\n  \"type\": \"object\",\n  \"properties\": {\n    \"catchphrases\": {\n      \"type\": \"array\",\n      \"minItems\": 5,\n      \"maxItems\": 15,\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"text\": { \"type\": \"string\", \"description\": \"ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºï¼ˆ1æ–‡ã€çŸ­ã‚ï¼‰ã€‚å›ºæœ‰åè©ã‚„æ•°å€¤ã¯ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€åŒ–ã€‚\" },\n          \"pattern\": { \"type\": \"string\", \"enum\": [\"ç–‘å•å‹\", \"æ–­å®šå‹\", \"å¦å®šå‹\", \"ã‚®ãƒ£ãƒƒãƒ—å‹\"], \"description\": \"ã‚­ãƒ£ãƒƒãƒã®å‹\" },\n          \"usage\": { \"type\": \"string\", \"enum\": [\"å†’é ­\", \"è¦‹å‡ºã—\", \"CTA\"], \"description\": \"ä½¿ã„ã©ã“ã‚\" },\n          \"emotion\": { \"type\": \"string\", \"enum\": [\"ä¸å®‰\", \"æœŸå¾…\", \"å±æ©Ÿæ„Ÿ\", \"å…±æ„Ÿ\", \"å¸Œæœ›\"], \"description\": \"ç‹™ã†æ„Ÿæƒ…\" },\n          \"placeholders_used\": {\n            \"type\": \"array\",\n            \"items\": { \"type\": \"string\" },\n            \"description\": \"ä½¿ã£ãŸãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ä¸€è¦§ï¼ˆä¾‹: {AI_TOOL}, {TIME_RANGE}ï¼‰\"\n          }\n        },\n        \"required\": [\"text\", \"pattern\", \"usage\", \"emotion\"]\n      }\n    }\n  },\n  \"required\": [\"catchphrases\"]\n}\n",
                "options": {
                    "systemPromptTemplate": "=ã‚ãªãŸã¯SNSæŠ•ç¨¿ã‹ã‚‰ã€Œå†åˆ©ç”¨å¯èƒ½ãªã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºã€ã‚’æŠ½å‡ºã™ã‚‹æŠ½å‡ºã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚æ¬¡ã‚’å³å®ˆã—ã¦ãã ã•ã„ã€‚\n\n* å‡ºåŠ›ã¯JSONã‚¹ã‚­ãƒ¼ãƒã«æº–æ‹ ã—ãŸãƒ‡ãƒ¼ã‚¿ã®ã¿ã€‚æ„Ÿæƒ³ãƒ»å…±æ„Ÿãƒ»è§£èª¬ã¯ç¦æ­¢ã€‚\n* ã‚­ãƒ£ãƒƒãƒã¯1æ–‡ã€çŸ­ãã€å˜ä½“ã§æˆç«‹ã™ã‚‹ã‚‚ã®ã€‚\n* å›ºæœ‰åè©ãƒ»ä¼šç¤¾åãƒ»ãƒ„ãƒ¼ãƒ«åãƒ»æ•°å€¤ãƒ»æœŸé–“ãƒ»å ´æ‰€ã¯å¿…ãšãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€åŒ–ã™ã‚‹ï¼ˆä¾‹: <<AI_TOOL>>, <<TIME_RANGE>>, <<NUMBER>>, <<ORG_TYPE>>ï¼‰ã€‚\n* å…ƒæ–‡ã®é•·ã„æ–‡ã‚’ãã®ã¾ã¾ã‚³ãƒ”ãƒ¼ã›ãšã€ã‚­ãƒ£ãƒƒãƒã¨ã—ã¦çŸ­ãåœ§ç¸®ã—ã¦ä½œã‚‹ã€‚\n* 5å€‹ã‚’å³é¸ã—ã¦æŠ½å‡ºã—ã€pattern/usage/emotion ã‚’å¿…ãšä»˜ä¸ã™ã‚‹ã€‚\n"
                }
            },
            "type": "@n8n/n8n-nodes-langchain.informationExtractor",
            "typeVersion": 1.2,
            "position": [
                448,
                64
            ],
            "id": "984af096-7a0e-4acc-b32d-cfaf2dd931b1",
            "name": "CatchphraseExtractor"
        },
        {
            "parameters": {
                "mode": "combine",
                "fieldsToMatchString": "combine_key",
                "options": {}
            },
            "type": "n8n-nodes-base.merge",
            "typeVersion": 3.2,
            "position": [
                992,
                -112
            ],
            "id": "4bc63549-576b-4891-8008-3490febe2cb3",
            "name": "Merge: Template and Phrase"
        },
        {
            "parameters": {
                "assignments": {
                    "assignments": [
                        {
                            "id": "65187abd-90c1-4b89-a157-ee6819e3aad6",
                            "name": "combine_key",
                            "value": "=combine",
                            "type": "string"
                        },
                        {
                            "id": "beaf6a53-3f83-4cb6-b3d5-140448ab3481",
                            "name": "template_output",
                            "value": "={{ $json.output }}",
                            "type": "object"
                        }
                    ]
                },
                "options": {}
            },
            "type": "n8n-nodes-base.set",
            "typeVersion": 3.4,
            "position": [
                752,
                -288
            ],
            "id": "09503cfd-9769-410b-be25-766675e58bd9",
            "name": "add combine_key"
        },
        {
            "parameters": {
                "assignments": {
                    "assignments": [
                        {
                            "id": "65187abd-90c1-4b89-a157-ee6819e3aad6",
                            "name": "combine_key",
                            "value": "=combine",
                            "type": "string"
                        },
                        {
                            "id": "3e0fa3ea-d3b2-46cf-ba86-545879d0569f",
                            "name": "phrase_output",
                            "value": "={{ $json.output.catchphrases }}",
                            "type": "array"
                        }
                    ]
                },
                "options": {}
            },
            "type": "n8n-nodes-base.set",
            "typeVersion": 3.4,
            "position": [
                752,
                64
            ],
            "id": "e1cd67c4-1d05-4dc4-b8ed-d5efdcacdf20",
            "name": "add combine_key1"
        },
        {
            "parameters": {
                "promptType": "define",
                "text": "=ä»¥ä¸‹ã® raw_text ã‚’ã€Œå†åˆ©ç”¨å¯èƒ½ãªãƒ†ãƒ³ãƒ—ãƒ¬è³‡ç”£ã€ã«å¤‰æ›ã—ã¦ãã ã•ã„ã€‚\n\nã€å…¥åŠ›ã€‘\nraw_text:\n{{ $json.raw_text }}\n\nurlï¼ˆã‚ã‚Œã°å‚è€ƒï¼‰:\n{{ $json.url }}\n\nã€å‡ºåŠ›è¦ä»¶ã€‘\n\n* template_type ã‚’å¿…ãš1ã¤é¸ã¶ï¼ˆclaim_reason / how_to / problem_solution / story / list / unknownï¼‰\n* template ã¯ â€œinstructionï¼ˆå·®ã—æ›¿ãˆå‰æã®æŒ‡ç¤ºæ–‡ï¼‰â€ ã§åŸ‹ã‚ã‚‹ã€‚æœ¬æ–‡ã®è¦ç´„ã‚„è¨€ã„æ›ãˆã¯ç¦æ­¢ã€‚\n* body ã¯ 1ã€œ5å€‹ã®é…åˆ—ã«ã™ã‚‹ï¼ˆhow_to ãªã‚‰æ‰‹é †ã£ã½ãå¢—ã‚„ã—ã¦OKï¼‰\n* placeholders ã¯æœ€ä½3ã¤ï¼ˆTARGET / PAIN / BENEFITï¼‰ã‚’å«ã‚ã€å¿…è¦ãªã‚‰è¿½åŠ ã—ã¦ã‚ˆã„\n* sanitized_terms ã«ã«ã¯ã€ç½®æ›ã—ãŸå…·ä½“èªã‚’ã€Œfromâ†’toã€ã§åˆ—æŒ™ã™ã‚‹ï¼ˆ3ã€œ10ä»¶ç›®å®‰ï¼‰\n* å›ºæœ‰åè©/ä¼šç¤¾å/ãƒ„ãƒ¼ãƒ«å/æ•°å€¤/æœŸé–“/å ´æ‰€ãŒæ®‹ã£ã¦ã„ãªã„ã‹è‡ªå·±ãƒã‚§ãƒƒã‚¯ã—ã€æ®‹ã‚Šãã†ãªã‚‰è¿½åŠ ã§ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€åŒ–ã™ã‚‹\n\nã€ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ä¾‹ï¼ˆå‚è€ƒï¼‰ã€‘\n\n* ãƒ„ãƒ¼ãƒ«/AIå â†’ {AI_TOOL}\n* æ™‚é–“/æœŸé–“ â†’ {TIME_RANGE}\n* å‰²åˆ/æ•°å€¤ â†’ {NUMBER} / {PERCENT}\n* ä¼šç¤¾/çµ„ç¹” â†’ {ORG} / {ORG_TYPE}\n* æ¥­å‹™å â†’ {TASK}\n* æˆæœç‰© â†’ {DELIVERABLE}\n* å¯¾è±¡é¡§å®¢ â†’ {TARGET}\n\nã§ã¯é–‹å§‹ã€‚",
                "hasOutputParser": true,
                "messages": {
                    "messageValues": [
                        {
                            "message": "=ã‚ãªãŸã¯ã€ŒSNSæŠ•ç¨¿ã‚’å†åˆ©ç”¨å¯èƒ½ãªãƒ†ãƒ³ãƒ—ãƒ¬è³‡ç”£ã«å¤‰æ›ã™ã‚‹åˆ†é¡ãƒ»æŠ½è±¡åŒ–ã‚¨ãƒ³ã‚¸ãƒ³ã€ã§ã™ã€‚\n\n## ç›®çš„\n\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰æ¸¡ã•ã‚Œã‚‹ raw_text ã‚’èª­ã¿å–ã‚Šã€\n\n1. æŠ•ç¨¿ã‚¿ã‚¤ãƒ—ã‚’åˆ†é¡ã—ï¼ˆtemplate_typeï¼‰\n2. å†åˆ©ç”¨å¯èƒ½ãªãƒ†ãƒ³ãƒ—ãƒ¬æ§‹é€ ï¼ˆinstructionãƒ™ãƒ¼ã‚¹ï¼‰ã«å¤‰æ›ã—\n3. å›ºæœ‰åè©ãƒ»ä¼æ¥­åãƒ»ãƒ„ãƒ¼ãƒ«åãƒ»æ•°å€¤ãƒ»æœŸé–“ãƒ»å ´æ‰€ãªã©ã®å…·ä½“æƒ…å ±ã‚’ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ã«ç½®æ›ã—ã¦æŠ½è±¡åŒ–ã™ã‚‹\n   ã“ã¨ã ã‘ã‚’è¡Œã†ã€‚\n\n## å³å®ˆãƒ«ãƒ¼ãƒ«\n\n* â€œæ„Ÿæƒ³/å…±æ„Ÿ/ææ¡ˆ/è³ªå•è¿”ã—â€ã¯ç¦æ­¢ã€‚åˆ¤æ–­ã¨æŠ½å‡ºã ã‘ã€‚\n* *å…ƒæ–‡ã®è¨€ã„æ›ãˆã‚„è¦ç´„ã¯ç¦æ­¢ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ã¯ã€Œå†åˆ©ç”¨ã§ãã‚‹æŒ‡ç¤ºï¼ˆinstructionï¼‰ã€ã§æ›¸ãã€‚*\n* *å›ºæœ‰æƒ…å ±ã¯å¿…ãšãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€åŒ–ã™ã‚‹ï¼ˆä¾‹: Claudeâ†’{AI_TOOL}, 10ã€œ15åˆ†â†’{TIME_RANGE}, å¤§æ‰‹ã‚³ãƒ³ã‚µãƒ«â†’{ORG_TYPE}ï¼‰ã€‚*\n* *åˆ†é¡ãƒ©ãƒ™ãƒ«ã¯æ¬¡ã®åˆ—æŒ™ä»¥å¤–ã‚’å‡ºã—ã¦ã¯ã„ã‘ãªã„ï¼š*\n  *claim_reason / how_to / problem_solution / story / list / unknown*\n* *è¿·ã£ãŸã‚‰ claim_reason ã«å€’ã™ï¼ˆunknowné€£ç™ºç¦æ­¢ï¼‰ã€‚*\n* *å‡ºåŠ›ã¯ã€æ¥ç¶šã•ã‚ŒãŸ Output Parser ã®ã‚¹ã‚­ãƒ¼ãƒã«100%æº–æ‹ ã—ãŸJSONã®ã¿ï¼ˆä½™è¨ˆãªæ–‡ç« ã‚’å‡ºã•ãªã„ï¼‰ã€‚*"
                        }
                    ]
                },
                "batching": {}
            },
            "type": "@n8n/n8n-nodes-langchain.chainLlm",
            "typeVersion": 1.9,
            "position": [
                448,
                -288
            ],
            "id": "2c49ddd9-899b-4ed7-ae8c-4065bda7764b",
            "name": "Basic LLM Chain"
        },
        {
            "parameters": {
                "assignments": {
                    "assignments": [
                        {
                            "id": "2d84f076-ff94-48d5-9b9a-12793d9bf9c2",
                            "name": "source_url",
                            "value": "={{ $('Normalize Input').item.json.url }}",
                            "type": "string"
                        },
                        {
                            "id": "b05c01ce-83a2-4afd-bf5a-bc832e8a1480",
                            "name": "source_text",
                            "value": "={{ $('Normalize Input').item.json.raw_text }}",
                            "type": "string"
                        },
                        {
                            "id": "3a176ebd-63e6-45b6-b44b-71e59613337b",
                            "name": "template_pack",
                            "value": "={{ $json.template_output }}",
                            "type": "object"
                        },
                        {
                            "id": "1bf16a98-b0b7-4d2a-b528-21206c376fa5",
                            "name": "catchphrase_pack",
                            "value": "={{ $json.phrase_output }}",
                            "type": "array"
                        }
                    ]
                },
                "options": {}
            },
            "type": "n8n-nodes-base.set",
            "typeVersion": 3.4,
            "position": [
                1168,
                -112
            ],
            "id": "fb5b2b4d-16bb-44cb-9b82-1e3f117e9de2",
            "name": "Set:UnifyPayload"
        },
        {
            "parameters": {
                "jsCode": "// Code node (JavaScript)\n// Purpose: normalize placeholder notation to <<PLACEHOLDER>> across the whole payload\n// Input expected (from Set:UnifyPayload):\n// {\n//   source_url, source_text,\n//   template_pack: { template, body[], placeholders[], sanitized_terms[] ... },\n//   catchphrase_pack: [ { text, placeholders_used[] ... }, ... ]\n// }\n//\n// Output: same structure, but placeholders normalized.\n// - converts {AI_TOOL} -> <<AI_TOOL>>\n// - converts HTML-escaped &lt;&lt;AI_TOOL&gt;&gt; -> <<AI_TOOL>>\n// - also normalizes placeholders_used arrays\n\nfunction decodeHtmlAngleBrackets(str) {\n  return str\n    .replaceAll(\"&lt;&lt;\", \"<<\")\n    .replaceAll(\"&gt;&gt;\", \">>\")\n    .replaceAll(\"&lt;\", \"<\")\n    .replaceAll(\"&gt;\", \">\");\n}\n\nfunction normalizePlaceholdersInString(str) {\n  if (typeof str !== \"string\") return str;\n\n  // 1) decode HTML escapes that n8n sometimes shows in text fields\n  let s = decodeHtmlAngleBrackets(str);\n\n  // 2) convert {PLACEHOLDER} => <<PLACEHOLDER>>\n  //    NOTE: this will convert any {...} token. If you want to restrict, tighten the regex.\n  s = s.replace(/\\\\{([A-Z0-9_]+)\\\\}/g, \"<<$1>>\");\n\n  // 3) if someone wrote (<<AI_TOOL>>) etc, keep as-is; no further action needed\n  return s;\n}\n\nfunction deepNormalize(value) {\n  if (value === null || value === undefined) return value;\n\n  if (typeof value === \"string\") {\n    return normalizePlaceholdersInString(value);\n  }\n\n  if (Array.isArray(value)) {\n    return value.map((v) => deepNormalize(v));\n  }\n\n  if (typeof value === \"object\") {\n    const out = {};\n    for (const [k, v] of Object.entries(value)) {\n      out[k] = deepNormalize(v);\n    }\n    return out;\n  }\n\n  return value; // number/boolean\n}\n\nreturn items.map((item) => {\n  const json = item.json ?? {};\n\n  // Normalize everything deeply\n  const normalized = deepNormalize(json);\n\n  // Optional: ensure common keys exist (fail-safe)\n  normalized.source_url = normalized.source_url ?? \"\";\n  normalized.source_text = normalized.source_text ?? \"\";\n\n  return { json: normalized };\n});\n"
            },
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                1328,
                -112
            ],
            "id": "6aecdb9c-20b0-42e6-beb6-e95fe75c8dab",
            "name": "Code:NormalizePlaceholders"
        },
        {
            "parameters": {
                "fieldToSplitOut": "catchphrase_pack",
                "options": {}
            },
            "type": "n8n-nodes-base.splitOut",
            "typeVersion": 1,
            "position": [
                1488,
                -272
            ],
            "id": "c8520435-1df1-497f-85fd-9319abf9a24a",
            "name": "Split Out"
        },
        {
            "parameters": {
                "assignments": {
                    "assignments": [
                        {
                            "id": "6287204b-9e12-4032-8268-ae49b39075cc",
                            "name": "catch_text",
                            "value": "={{ $json.text }}",
                            "type": "string"
                        },
                        {
                            "id": "6168e437-56f1-419d-b3a9-d3f11e5c6e24",
                            "name": "pattern",
                            "value": "={{ $json.pattern }}",
                            "type": "string"
                        },
                        {
                            "id": "cc2a0e9e-d37c-46a3-98b6-e3780747fa73",
                            "name": "usage",
                            "value": "={{ $json.usage }}",
                            "type": "string"
                        },
                        {
                            "id": "f565d22e-ce99-47e4-bc35-f5ee37f5ff95",
                            "name": "source_url",
                            "value": "={{ $('Code:NormalizePlaceholders').item.json.source_url }}",
                            "type": "string"
                        },
                        {
                            "id": "4397cf57-08c4-41e2-9b17-177cbb6f2a33",
                            "name": "template_type",
                            "value": "={{ $('Code:NormalizePlaceholders').item.json.template_pack.template_type }}",
                            "type": "string"
                        },
                        {
                            "id": "d749d562-819c-406a-a8d3-3081ca4614e0",
                            "name": "created_at",
                            "value": "={{ $now.toISO() }}",
                            "type": "string"
                        }
                    ]
                },
                "options": {}
            },
            "type": "n8n-nodes-base.set",
            "typeVersion": 3.4,
            "position": [
                1648,
                -272
            ],
            "id": "c7d4ce5b-faa2-4c91-845a-5eaef6e41f3f",
            "name": "Set:MapCatchRow"
        },
        {
            "parameters": {
                "operation": "append",
                "documentId": {
                    "__rl": true,
                    "value": "1ceG2Lr-jWF4KO4vMQwSCQ1UTUfdCjzZXHn0B0PqoyTk",
                    "mode": "list",
                    "cachedResultName": "Xé‹ç”¨",
                    "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1ceG2Lr-jWF4KO4vMQwSCQ1UTUfdCjzZXHn0B0PqoyTk/edit?usp=drivesdk"
                },
                "sheetName": {
                    "__rl": true,
                    "value": 1031722399,
                    "mode": "list",
                    "cachedResultName": "ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚º",
                    "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1ceG2Lr-jWF4KO4vMQwSCQ1UTUfdCjzZXHn0B0PqoyTk/edit#gid=1031722399"
                },
                "columns": {
                    "mappingMode": "defineBelow",
                    "value": {
                        "Catch Text": "={{ $json.catch_text }}",
                        "Pattern": "={{ $json.pattern }}",
                        "Usage": "={{ $json.usage }}",
                        "Source Url": "={{ $json.source_url }}",
                        "Created At": "={{ $json.created_at }}",
                        "Combine Keyï¼ˆä»»æ„ï¼šãƒ‡ãƒãƒƒã‚°ç”¨ã«æ®‹ã™ã¨ä¾¿åˆ©ï¼‰": "={{ $('Merge: Template and Phrase').item.json.combine_key }}"
                    },
                    "matchingColumns": [],
                    "schema": [
                        {
                            "id": "Created At",
                            "displayName": "Created At",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "Catch Text",
                            "displayName": "Catch Text",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "Pattern",
                            "displayName": "Pattern",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "Usage",
                            "displayName": "Usage",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "Emotion ",
                            "displayName": "Emotion ",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "Placeholders Used ",
                            "displayName": "Placeholders Used ",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "Template Type ",
                            "displayName": "Template Type ",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "Source Url",
                            "displayName": "Source Url",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "Combine Keyï¼ˆä»»æ„ï¼šãƒ‡ãƒãƒƒã‚°ç”¨ã«æ®‹ã™ã¨ä¾¿åˆ©ï¼‰",
                            "displayName": "Combine Keyï¼ˆä»»æ„ï¼šãƒ‡ãƒãƒƒã‚°ç”¨ã«æ®‹ã™ã¨ä¾¿åˆ©ï¼‰",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        }
                    ],
                    "attemptToConvertTypes": false,
                    "convertFieldsToString": false
                },
                "options": {}
            },
            "type": "n8n-nodes-base.googleSheets",
            "typeVersion": 4.7,
            "position": [
                1824,
                -272
            ],
            "id": "d900e696-d8b4-4533-801e-bdbc9a88826a",
            "name": "Append row in sheet",
            "credentials": {
                "googleSheetsOAuth2Api": {
                    "id": "yHBJrEj3zL44ZWGQ",
                    "name": "Google Sheets account"
                }
            }
        },
        {
            "parameters": {
                "operation": "append",
                "documentId": {
                    "__rl": true,
                    "value": "1ceG2Lr-jWF4KO4vMQwSCQ1UTUfdCjzZXHn0B0PqoyTk",
                    "mode": "list",
                    "cachedResultName": "Xé‹ç”¨",
                    "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1ceG2Lr-jWF4KO4vMQwSCQ1UTUfdCjzZXHn0B0PqoyTk/edit?usp=drivesdk"
                },
                "sheetName": {
                    "__rl": true,
                    "value": 598431992,
                    "mode": "list",
                    "cachedResultName": "ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ",
                    "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1ceG2Lr-jWF4KO4vMQwSCQ1UTUfdCjzZXHn0B0PqoyTk/edit#gid=598431992"
                },
                "columns": {
                    "mappingMode": "defineBelow",
                    "value": {
                        "template_idï¼ˆä¸€æ„ã‚­ãƒ¼ï¼‰": "={{ $execution.id }}-{{ $json.source_url }}",
                        "template_type": "={{ $json.template_pack.template_type }}",
                        "template_text": "={{ $json.template_pack.template }}",
                        "body_json": "={{ JSON.stringify($json.template_pack.body.join(\"\\n\") || []) }}",
                        "placeholders_json": "={{ JSON.stringify($json.template_pack.placeholders || []) }}",
                        "sanitized_terms_json": "={{ JSON.stringify($json.template_pack.sanitized_terms || []) }}",
                        "source_url": "={{ $json.source_url }}",
                        "created_at": "={{ $now.toISO() }}",
                        "combine_keyï¼ˆä»»æ„ï¼‰": "={{ $json.combine_key || 'combine' }}"
                    },
                    "matchingColumns": [],
                    "schema": [
                        {
                            "id": "template_idï¼ˆä¸€æ„ã‚­ãƒ¼ï¼‰",
                            "displayName": "template_idï¼ˆä¸€æ„ã‚­ãƒ¼ï¼‰",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "template_type",
                            "displayName": "template_type",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "template_text",
                            "displayName": "template_text",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "body_json",
                            "displayName": "body_json",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "placeholders_json",
                            "displayName": "placeholders_json",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "sanitized_terms_json",
                            "displayName": "sanitized_terms_json",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "source_url",
                            "displayName": "source_url",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "created_at",
                            "displayName": "created_at",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "combine_keyï¼ˆä»»æ„ï¼‰",
                            "displayName": "combine_keyï¼ˆä»»æ„ï¼‰",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        }
                    ],
                    "attemptToConvertTypes": false,
                    "convertFieldsToString": false
                },
                "options": {}
            },
            "type": "n8n-nodes-base.googleSheets",
            "typeVersion": 4.7,
            "position": [
                1824,
                -112
            ],
            "id": "14adb355-1820-4f20-867f-68ad164b6731",
            "name": "Append row in sheet1",
            "credentials": {
                "googleSheetsOAuth2Api": {
                    "id": "yHBJrEj3zL44ZWGQ",
                    "name": "Google Sheets account"
                }
            }
        },
        {
            "parameters": {},
            "id": "b637769a-3968-41b7-8d44-67b43fd6bd51",
            "name": "ErrorTrigger:Global",
            "type": "n8n-nodes-base.errorTrigger",
            "typeVersion": 1,
            "position": [
                96,
                -544
            ]
        },
        {
            "parameters": {
                "select": "channel",
                "channelId": {
                    "__rl": true,
                    "value": "#all-monitaring-web-site",
                    "mode": "name"
                },
                "text": "=ğŸš¨ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸï¼\n\nãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ¼ãƒ‰ï¼š{{ $node[\"ErrorTrigger:Global\"].parameter[\"node\"] }}\nãƒ»ã‚¨ãƒ©ãƒ¼å†…å®¹ï¼š{{ $node[\"ErrorTrigger:Global\"].parameter[\"message\"] }}\nãƒ»æ™‚åˆ»ï¼š{{new Date().toLocaleString()}}",
                "otherOptions": {}
            },
            "id": "15a26271-f93f-42a8-9f38-fdb6139dee90",
            "name": "Slack:ErrorNotify",
            "type": "n8n-nodes-base.slack",
            "typeVersion": 2.1,
            "position": [
                304,
                -544
            ],
            "webhookId": "d5025120-cc34-45e5-a020-1d25eec1af48",
            "credentials": {
                "slackApi": {
                    "id": "uv78jPZ831aDUtpk",
                    "name": "Slack account"
                }
            }
        },
        {
            "parameters": {
                "select": "channel",
                "channelId": {
                    "__rl": true,
                    "value": "#all-monitaring-web-site",
                    "mode": "name"
                },
                "text": "=æˆåŠŸã—ã¾ã—ãŸï¼\nhttps://docs.google.com/spreadsheets/d/1ceG2Lr-jWF4KO4vMQwSCQ1UTUfdCjzZXHn0B0PqoyTk/edit?gid=1031722399#gid=1031722399",
                "otherOptions": {}
            },
            "id": "c5a25f18-a399-4786-8f6d-c3d3a931f7d9",
            "name": "Slack:ErrorNotify1",
            "type": "n8n-nodes-base.slack",
            "typeVersion": 2.1,
            "position": [
                2080,
                -112
            ],
            "webhookId": "d5025120-cc34-45e5-a020-1d25eec1af48",
            "credentials": {
                "slackApi": {
                    "id": "uv78jPZ831aDUtpk",
                    "name": "Slack account"
                }
            }
        }
    ],
    "connections": {
        "On form submission": {
            "main": [
                [
                    {
                        "node": "Normalize Input",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Normalize Input": {
            "main": [
                [
                    {
                        "node": "CatchphraseExtractor",
                        "type": "main",
                        "index": 0
                    },
                    {
                        "node": "Basic LLM Chain",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Google Gemini Chat Model": {
            "ai_languageModel": [
                [
                    {
                        "node": "Basic LLM Chain",
                        "type": "ai_languageModel",
                        "index": 0
                    }
                ]
            ]
        },
        "Structured Output Parser": {
            "ai_outputParser": [
                [
                    {
                        "node": "Basic LLM Chain",
                        "type": "ai_outputParser",
                        "index": 0
                    }
                ]
            ]
        },
        "Google Gemini Chat Model1": {
            "ai_languageModel": [
                [
                    {
                        "node": "CatchphraseExtractor",
                        "type": "ai_languageModel",
                        "index": 0
                    }
                ]
            ]
        },
        "CatchphraseExtractor": {
            "main": [
                [
                    {
                        "node": "add combine_key1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Merge: Template and Phrase": {
            "main": [
                [
                    {
                        "node": "Set:UnifyPayload",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "add combine_key": {
            "main": [
                [
                    {
                        "node": "Merge: Template and Phrase",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "add combine_key1": {
            "main": [
                [
                    {
                        "node": "Merge: Template and Phrase",
                        "type": "main",
                        "index": 1
                    }
                ]
            ]
        },
        "Basic LLM Chain": {
            "main": [
                [
                    {
                        "node": "add combine_key",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Set:UnifyPayload": {
            "main": [
                [
                    {
                        "node": "Code:NormalizePlaceholders",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Code:NormalizePlaceholders": {
            "main": [
                [
                    {
                        "node": "Split Out",
                        "type": "main",
                        "index": 0
                    },
                    {
                        "node": "Append row in sheet1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Split Out": {
            "main": [
                [
                    {
                        "node": "Set:MapCatchRow",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Set:MapCatchRow": {
            "main": [
                [
                    {
                        "node": "Append row in sheet",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Append row in sheet": {
            "main": [
                []
            ]
        },
        "Append row in sheet1": {
            "main": [
                [
                    {
                        "node": "Slack:ErrorNotify1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "ErrorTrigger:Global": {
            "main": [
                [
                    {
                        "node": "Slack:ErrorNotify",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        }
    },
    "pinData": {},
    "meta": {
        "templateCredsSetupCompleted": true,
        "instanceId": "08f731f92ccc8a5c5da3db6ecfae52595f2e0a818d4d668579fc375e3f9539a9"
    }
}